<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title></title>
    <script type="text/javascript">
    	
   		document.addEventListener('plusready', function(){
   			//console.log("所有plus api都应该在此事件发生后调用，否则会出现plus is undefined。")
   			
   		});
   		
    </script>
	<script src="./js/mui.min.js"></script>
	<link href="./css/mui.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="css/index.css" />
</head>
<body>
	<div class="mui-card" >
		<!--页眉，放置标题-->
		<div class="mui-card-header">
			<header>
				<h1>双色球数据分析</h1>
				<div class="showtime"></div>
			</header>
		</div>
		<!--内容区-->
		<div class="mui-card-content">
			<section class="section">
				<div class="column">
					<div id="" class="panle line">
						<h2>
							蓝球-次数
							<a href="javascript:;">2020</a>
							<a href="javascript:;">2021</a>
						</h2>
						<div class="chart"></div>
						<div class="panel-footer"></div>
					</div>
					<div id="" class="panle line1">
						<h2>
							红球-次数
							<a href="javascript:;">2020</a>
							<a href="javascript:;">2021</a>
						</h2>
						<div class="chart"></div>
						<div class="panel-footer"></div>
					</div>
					<div id="" class="panle line2">
						<h2>红蓝-混合</h2>
						<div class="chart"></div>
						<div class="panel-footer"></div>
					</div>
					<div id="" class="panle bar2">
						<h2>预测图</h2>
						<div class="chart"></div>
						<div class="panel-footer"></div>
					</div>
				</div>
				<div id="app" style="width: 100%;">
					<div class="list-top" >
						<span v-if="list[0]">下一期：{{list[0].phase+1}}期：</span>
						<button @click="add" type="button" class="mui-btn mui-btn-primary mui-btn-outlined" style="height: 1.8rem;padding: 0 0.125rem;text-align: center;"><span class="mui-icon mui-icon mui-icon-plusempty"></span>添加预测</button>
					</div>
					<div class="list-top"  v-for="(item,index) in list">
						<span>{{item.redBall.length===0? '下一期':'第'}}{{item.phase}}期：</span>
						<div class="list">
							<div class="ball">
							 <span v-for="(item1,index1) in item.redBall" class="mui-badge mui-badge-danger">{{item1}}</span>
							 <span class="mui-badge mui-badge-primary">{{item.blueBall[0]}}</span>
							 <span style="color: gainsboro;">(开奖)</span>
							</div>
						</div>
						<div class="list" v-for="(item2,index2) in item.forecast">
							<div class="ball" >
							 <span  v-for="(item4,index4) in item2.redBall" class="mui-badge mui-badge-danger">{{item4}}</span>
							 <span v-for="(item5,index5) in item2.blueBall" class="mui-badge mui-badge-primary">{{item5}}</span>
							 <span style="color: gainsboro;">(预测)</span>
							</div>
						</div>
						<button v-if="item.redBall.length===0" @click="add" type="button" class="mui-btn mui-btn-primary mui-btn-outlined" style="height: 1.8rem;padding: 0 0.125rem;text-align: center;"><span class="mui-icon mui-icon mui-icon-plusempty"></span>添加预测</button>
					</div>
					<div @click="toTop" class="toTop"><span class="mui-icon mui-icon-arrowup"></span></div>
				</div>
			</section>
		</div>
		<!--页脚，放置补充信息或支持的操作-->
		<div class="mui-card-footer">页脚</div>
	</div>
	<script src="./js/public.js"></script>
	<script src="js/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
	<script src="./js/echarts.min.js"></script>
	<script src="./js/index.js"></script>
	<script src="./js/flexible.js"></script>
	<script>
		  new Vue({
		    el: '#app',
		    data: {
				list:[],
			  form: {
			   name: '',
			 },
		    },
			created(){
				this.getList()
			},
			methods:{
				 getList(){
					 selectLottery().then((data)=>{
						 let result = data.data
						 result.sort(this.sortId); //排序
						 this.list = result
						 console.log(result)
					 })
				 },
				 sortId(a,b){ //json数组排序
				   return b.phase-a.phase
				},
				 add(){
					 localStorage.setItem('nextPhase',(this.list[0].redBall.length===0? this.list[0].phase:this.list[0].phase+1))
					 mui.openWindow({
					     url:'./html/addForecast.html',
					     id:'pullrefresh',
					     styles:{
							 show:{
							   autoShow:true,//页面loaded事件发生后自动显示，默认为true
							   aniShow:"slide-in-right",//页面显示动画，默认为”slide-in-right“；
							   duration:100//页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；
							 },
							 extras:{
							 		name:'mui'  //扩展参数
							 	},
							 waiting:{
							   autoShow:true,//自动显示等待框，默认为true
							   title:'正在加载...',//等待对话框上显示的提示内容
							 }
						}
					 })
				 },
				 toTop(){//返回顶部
					 mui.scrollTo(0,1000);
				 }
			}
		  })
	</script>
</body>
</html>
